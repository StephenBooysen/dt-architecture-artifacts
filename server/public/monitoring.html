<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Monitor - Architecture Artifacts</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1><i class="bi bi-building me-2"></i>Architecture Artifacts</h1>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-title">Overview</div>
          <a href="/" class="nav-item">
            <i class="bi bi-speedometer2 me-2"></i>Dashboard
          </a>
        </div>
        
        <div class="nav-section">
          <div class="nav-section-title">Settings</div>
          <a href="/settings" class="nav-item">
            <i class="bi bi-git me-2"></i>Git Repository
          </a>
        </div>
        
        <div class="nav-section">
          <div class="nav-section-title">Monitoring</div>
          <a href="/monitoring/api" class="nav-item active">
            <i class="bi bi-graph-up me-2"></i>API Monitor
          </a>
        </div>
      </nav>
    </aside>
    <main class="main-content">
      <div class="content-header">
        <h1>API Monitor</h1>
        <p>Monitor API calls and system performance</p>
        <div class="header-actions">
          <button class="btn btn-secondary" onclick="refreshData()">Refresh</button>
          <button class="btn btn-secondary" onclick="testApiCall()">Test API</button>
        </div>
      </div>

      <div class="dashboard-stats" id="stats">
        <!-- Stats will be populated by JavaScript -->
      </div>

      <div class="api-calls-table">
        <h2>Recent API Calls</h2>
        <div class="controls">
          <label>
            Auto-refresh:
            <input type="checkbox" id="autoRefresh" onchange="toggleAutoRefresh()" checked>
          </label>
          <label>
            Filter by method:
            <select id="methodFilter" onchange="filterCalls()">
              <option value="">All Methods</option>
              <option value="GET">GET</option>
              <option value="POST">POST</option>
              <option value="PUT">PUT</option>
              <option value="DELETE">DELETE</option>
              <option value="PATCH">PATCH</option>
            </select>
          </label>
          <label>
            Filter by status:
            <select id="statusFilter" onchange="filterCalls()">
              <option value="">All Status</option>
              <option value="2">2xx Success</option>
              <option value="3">3xx Redirect</option>
              <option value="4">4xx Client Error</option>
              <option value="5">5xx Server Error</option>
            </select>
          </label>
        </div>
        <div class="table-container">
          <table id="apiCallsTable">
            <thead>
              <tr>
                <th>Time</th>
                <th>Method</th>
                <th>URL</th>
                <th>Status</th>
                <th>Duration</th>
                <th>Size</th>
                <th>IP</th>
              </tr>
            </thead>
            <tbody id="tableBody">
              <!-- API calls will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script src="/script.js"></script>
</body>
</html>